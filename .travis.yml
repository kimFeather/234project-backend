language: java
before_install:
- sudo rm /usr/local/bin/docker-compose
- curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname
  -s`-`uname -m` > docker-compose
- chmod +x docker-compose
- sudo mv docker-compose /usr/local/bin
- docker login -u "$DOCKER_USERNAME" -p "$DOCKER_PASSWORD"
install:
- mvn install -Dmaven.javadoc.skip=true -B -V
- ls -l
- docker build --build-arg JAR_FILE=/target/project.jar -t kuribohw/project234-backend
- docker push kuribohw/project234-backend
- docker pull dto80/project234-frontend:latest
script:
- docker-compose -H "$DOCKER_HOST" up -d
cache:
  directories:
  - "$HOME/.m2"
env:
  global:
  - DOCKER_COMPOSE_VERSION=1.20.0
  - secure: k0u91FY08K/3FOhL409ct3+HCaa6iS4NnQOCCFYHziIbSCyxkCjYNAd99ONwQf21TQQhTdn7N2N4TJCwsslHYXLaW7Em/HMtpiV6bBU3GPYRN2/lrf6dQfRdrDSiBqHaKUYgYPVw7/H/GO0ZCjEXNB32YAz9xZZnenImHzKO5tNTYR4/KwVHR8cpJjLKqMqZIwCsZAtVdXEKhCUll8GGgdcUVC83uaIcgMUCsmsPvVCMmfbxjUul2OAsqgIyj53dfTsVLD7gf/AupIXgBsbYYyNLo51C9C80BrkX16luyZPLVmGJxgDtoGl+A52aPqZw6MrK9kBiynWuKdLnLnYVlYWfcgDUffD0s/0l38n36+x4IeSln8Q/KRgW00vcd6ipxeLLUrCC1kCnwiYNl+N4uREXW5HJsv3xN8QS/AvefqLFTmFiS4RCNSmFohkPL9luPvurM+Ome5uR2H2czq/69z+/aOJHuwFFCgFDBrOHGSisaKQfQcDnFP8cH/OMvPFM8HrFf5EO/OmI5iYZeuuukjvepde+Af3lY4ODA9gH3heGwH5RI5KHH3MAeWV8qTKLnTPXLWWe6xVk87zvon7gAtdzfkPZFxy+V10pJi354e1uf90vKXx7+zhgsggB2PShAjxcI5XEjPbKI5wagw5T+jMM7uDExKUc5wNFjISXJfM=
  - secure: IZH0YDfmP+GdHAh2gFCw1FAdLvV8nqwFZMVwSiF2Q2NU4RsAVsgmR5LW8psxX2ggpSpoUXEwD7qZQzv63we67/HZhkahUEMgMufVELLp1GPFcQ0CVQ5tEBrOxgF8GrnBDrovGMV+i94yuj41XMTiPNlTBQMWdC1IUdte/S/tgB3eRjYIjDSnYYUAVglgU/Fexf7BxMgNNdy/fyBISxqUe/Q97pgAQM5gWXOgjqUNjPRVyRf1Z00iKR4haqO3v1KcmQfxp81MzZwp/EGyuKmN08LEAd6Y5lYrzldBce9ZoF0XT2P9LsEOtw863W+JgGi47+A9/xm1GjuLVK7yz3znIn9xLBxxCcT5HzauyjOAxgdBFDdqktXoiD7Drl+F0KZQziw7gcz2ZEdFGiluDgTAr6hcbZMVeBkUgHGHJMf4YI6b4ug46/o+NgScVqFYeWK6SVjqtiXcg04iQLJ7Tv3srsCLQqPMbz0smClM5grjnkuIX3sv8Cdqge5u0GvX9jUnXh4Arx97ifG2683rAn4O2IuTFLcj92SbE/Zhu2dPwrhKnCZ3mcpRft070/Z5Cq25J+JYw9GUCTIpsF0RNId5vuPgNuXTAua54BApwXM+iQ6QRSXBEsgZEu1tE1+bn6d7onQIdHEo3TodFPLE8lSQEdKft9OR/V3d7EE1toGLYAA=
  - secure: eB2UEhI9In57ZVDRjrlDSiESWOF62KXDCJU1LfStL8j1GcwReyBKLwupC3UKliSXFxlnej2dSRAPbxKbMmRi/IsySWRBPtkRDFinUA0d7KcTcIt8c7K1jTqHIdv2m6vwlYmvQivBWt/zosq9rq1ufP7XlHk8IT42Duhl7MIk6jNqZWF8g9AhJmawSSVomxhFZavIktQiyfWGn2XhcWMSUZ0Or7jH7SxGxgfYakfhRMkwWgNIpTxcpkVTgiuTO4tM1vxTnpZz9mkMCj92rf1HqsI3OL3p9LvmialhpK9r/cdMSx7kpJmcf+jSOJHbcdyEyyqH8zMjHASWPCjtMzUQIGSxaGzixcV3MJGc1yVllN4GmcsmPhU3zx7oT3qyLQ3HUMXSb4yy8xvsK9dPqKR2qPSgXWSndxQypSX5HJGte/Uw6shlFLgTotrCBlQDps4imJUnjb1MTnTo8Prrrx/FYhiYAKu6LjVDt1j7cHyA4T+epscPH3V1b8uDS3W+yB5visDfWU8Sy4A6KEx7A18ts7Ij3BIaA5enUiQpG4HJ5dT8+Xd5n+avO7lYkQ+ODvGimzxXYYh4snj3AqfHpgu8OSJNfEBUOjh/D9ayEa/TeY2DRBu8KkszSHr6EPu3Vwh38UvEn0OqfIkNIdGLAROsiGpBKumvnOSBMFfXGZlk33U=
